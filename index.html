<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Bio Profile | Khang0811</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; outline: none; -webkit-tap-highlight-color: transparent; }
        
        html, body { 
            height: 100%;
            /* Fix giật lề trên mobile */
            overflow-x: hidden;
            scrollbar-gutter: stable;
        }

        /* TÁCH NỀN RA RIÊNG ĐỂ CHỐNG ZOOM KHI SỔ QR */
        .bg-fixed {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: #000 url('nen.jpg') no-repeat center center;
            background-size: cover;
            z-index: -1;
            /* Khóa nền, chống tính toán lại layout */
            transform: translateZ(0);
            -webkit-transform: translateZ(0);
        }

        .overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.45); 
            z-index: 0;
        }

        body {
            font-family: 'Inter', sans-serif;
            color: #fff;
            display: flex; justify-content: center; align-items: center;
            padding: 40px 15px;
        }

        ::-webkit-scrollbar { width: 0px; }

        .container {
            position: relative; z-index: 2; width: 100%; max-width: 380px;
            padding: 40px 0 30px;
            text-align: center;
            background: rgba(25, 25, 25, 0.4); 
            backdrop-filter: blur(40px) saturate(200%) brightness(1.1);
            -webkit-backdrop-filter: blur(40px) saturate(200%) brightness(1.1);
            border-radius: 42px;
            border: 1px solid rgba(255, 255, 255, 0.18);
            box-shadow: inset 0 1.5px 4px rgba(255, 255, 255, 0.2), 0 30px 60px rgba(0, 0, 0, 0.5);
            display: flex; flex-direction: column;
            /* Transition mượt mà */
            transition: all 0.5s cubic-bezier(0.33, 1, 0.68, 1);
        }

        /* ... Các phần Avatar, H1, Nickname giữ nguyên ... */
        .avatar { width: 90px; height: 90px; border-radius: 50%; object-fit: cover; border: 2px solid rgba(255, 255, 255, 0.35); margin: 0 auto 15px; }
        h1 { font-size: 24px; font-weight: 700; margin-bottom: 6px; }
        .nickname { font-size: 14px; opacity: 0.5; margin-bottom: 25px; display: block; }
        
        /* TABS */
        .tabs-wrapper { background: rgba(255, 255, 255, 0.08); padding: 5px; border-radius: 20px; display: flex; position: relative; margin: 0 25px 25px; border: 1px solid rgba(255, 255, 255, 0.1); }
        .tab-btn { flex: 1; padding: 12px 0; border: none; background: none; color: #fff; font-size: 13px; font-weight: 600; cursor: pointer; z-index: 2; opacity: 0.5; }
        .tab-btn.active { opacity: 1; }
        .tab-slider { position: absolute; height: calc(100% - 10px); top: 5px; left: 5px; background: rgba(255, 255, 255, 0.15); border-radius: 16px; z-index: 1; transition: transform 0.4s cubic-bezier(0.33, 1, 0.68, 1); }

        .content-window { width: 100%; overflow: hidden; }
        .content-wrapper { display: flex; width: 100%; transition: transform 0.5s cubic-bezier(0.33, 1, 0.68, 1); }
        .content-section { flex: 0 0 100%; padding: 0 25px; display: flex; flex-direction: column; gap: 12px; opacity: 0; scale: 0.98; transition: opacity 0.4s, scale 0.5s; }
        .content-section.active { opacity: 1; scale: 1; }

        .btn-link { display: block; background: rgba(255, 255, 255, 0.1); color: #fff; text-decoration: none; padding: 17px; border-radius: 18px; font-size: 15px; font-weight: 500; border: 1px solid rgba(255, 255, 255, 0.1); transition: 0.2s; }

        /* ZALO ACCORDION - CHỐNG GIẬT NỀN */
        .zalo-expansion-container {
            background: rgba(0, 104, 255, 0.3);
            border: 1px solid rgba(0, 104, 255, 0.3);
            border-radius: 18px;
            overflow: hidden;
            transition: all 0.5s cubic-bezier(0.33, 1, 0.68, 1);
            cursor: pointer;
        }

        .zalo-label { padding: 17px; font-size: 15px; font-weight: 500; color: #fff; display: block; }

        .qr-reveal {
            max-height: 0; opacity: 0; padding: 0 12px;
            transition: all 0.5s cubic-bezier(0.33, 1, 0.68, 1);
            overflow: hidden;
        }

        .zalo-expansion-container.open { background: rgba(0, 104, 255, 0.4); border-radius: 25px; }
        .zalo-expansion-container.open .qr-reveal { max-height: 550px; opacity: 1; padding-bottom: 12px; }

        .qr-image-auto { width: 100%; height: auto; display: block; border-radius: 15px; background: #fff; }

        .credit { margin-top: 40px; font-size: 10px; opacity: 0.25; letter-spacing: 2px; }
    </style>
</head>
<body>
    <div class="bg-fixed"></div>
    <div class="overlay"></div>

    <div class="container">
        <img src="avatar.jpg" alt="Avatar" class="avatar">
        <h1 id="user-name"></h1>
        <span class="nickname" id="user-nickname"></span>
        <div class="tabs-wrapper" id="tabs-header"><div class="tab-slider" id="slider"></div></div>
        <div class="content-window"><div class="content-wrapper" id="master-slider"></div></div>
        <div class="credit">cre: khang0811</div>
    </div>

    <script src="config.js"></script>
    <script>
        document.getElementById('user-name').innerText = CONFIG.profile.name;
        document.getElementById('user-nickname').innerText = CONFIG.profile.nickname;
        const header = document.getElementById('tabs-header');
        const masterSlider = document.getElementById('master-slider');
        const slider = document.getElementById('slider');
        const tabCount = CONFIG.tabs.length;

        CONFIG.tabs.forEach((tab, index) => {
            const btn = document.createElement('button');
            btn.className = `tab-btn ${index === 0 ? 'active' : ''}`;
            btn.innerText = tab.title;
            btn.onclick = () => handleTabClick(index);
            header.appendChild(btn);
            const section = document.createElement('div');
            section.className = `content-section ${index === 0 ? 'active' : ''}`;
            let html = tab.links.map(l => `<a href="${l.url}" class="btn-link" target="_blank">${l.title}</a>`).join('');
            if(tab.showSpecial) {
                html += `<div class="btn-link" id="email-btn" onclick="toggleEmail()">Gửi Email cho tôi</div>
                         <div class="zalo-expansion-container" id="zalo-box" onclick="toggleZalo()">
                            <div class="zalo-label">Zalo QR Code</div>
                            <div class="qr-reveal"><img src="zalo-qr.jpg" class="qr-image-auto" alt="Zalo QR"></div>
                         </div>`;
            }
            section.innerHTML = html;
            masterSlider.appendChild(section);
        });

        function updateSlider(index) {
            const wrapperWidth = header.clientWidth - 10; 
            const tabWidth = wrapperWidth / tabCount;
            slider.style.width = `${tabWidth}px`;
            slider.style.transform = `translateX(${index * tabWidth}px)`;
            masterSlider.style.transform = `translateX(-${index * 100}%)`;
        }

        function handleTabClick(index) {
            updateSlider(index);
            document.querySelectorAll('.tab-btn').forEach((btn, i) => btn.classList.toggle('active', i === index));
            document.querySelectorAll('.content-section').forEach((sec, i) => sec.classList.toggle('active', i === index));
            const zaloBox = document.getElementById('zalo-box');
            if(zaloBox) zaloBox.classList.remove('open');
        }

        function toggleEmail() {
            const btn = document.getElementById('email-btn');
            btn.innerText = btn.innerText === "Gửi Email cho tôi" ? CONFIG.email : "Gửi Email cho tôi";
        }

        function toggleZalo() {
            document.getElementById('zalo-box').classList.toggle('open');
        }

        window.addEventListener('load', () => updateSlider(0));
    </script>
</body>
</html>
